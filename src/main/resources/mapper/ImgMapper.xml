<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="team.cheese.dao.ImgMapper">
    <sql id="selectFromImg">
        SELECT no, tb_name, tb_no, imgtype, file_rt, u_name, o_name, w_size, h_size
        FROM img
    </sql>

    <select id="count" resultType="int">
        SELECT count(*)
        FROM img
    </select>

<!--  R : 전체 테이블 읽어오기  -->
    <select id="selectAll" resultType="ImgDto">
        <include refid="selectFromImg"/>
    </select>

<!--  R : 사용하는 행만 읽어오기  -->
    <select id="selectUse" resultType="ImgDto">
        <include refid="selectFromImg"/>
        WHERE
        state = 'Y'
    </select>

<!--  D : 데이터 전체 삭제  -->
    <delete id="deleteAll">
        DELETE FROM img
    </delete>

    <update id="resetAutoIncrement" parameterType="map">
        alter table img auto_increment = 1
    </update>

</mapper>